## File:    Makefile 
# Author:  Alexandre Riazanov (alexandre.riazanov@gmail.com)
# Created: Feb 02, 2006
# Purpose: Makefile for TPTP parser in Java
#
#
# Note: the tptp_tester can be run by using
#  java -cp ./TptpParser.jar:/--full-path-to-antlr--/antlr-2.7.5/lib/antlr.jar tptp_tester <input file>
#
######################################################################


#   Change what you have to change here:

# ANTLR_JAR = /---full-path-to-antlr----/antlr-2.7.5/lib/antlr.jar

ANTLR_JAR = /usr/share/java/antlr.jar

######################################################################

SRC = ./*.java 
CLS = ./tptp_tester.class\
      ./SimpleTptpParserOutput.class\
      ./TptpParserOutput.class

###  Parser sources that are generated by ANTLR from tptp.g
PARSER_SRC = TptpLexer.java TptpTokenTypes.java TptpParser.java
PARSER_CLS = ./TptpLexer.class ./TptpTokenTypes.class ./TptpParser.class

NESTED_CLS = ./*$$*.class


DOCDIR = ./doc
TRASH = $(CLS) $(NESTED_CLS) $(DOCDIR)\
          ./*~ ./*/*~\
          ./TptpTokenTypes.txt ./TptpTokenTypes.txt


######################################################################

default: TptpParser.jar

TptpParser.jar: $(CLS) $(PARSER_CLS)
	jar cf TptpParser.jar $(CLS) $(PARSER_CLS) $(NESTED_CLS) 

%.class: %.java ./TptpParser.java ./tptp.g
	javac -Xlint -classpath .:$(ANTLR_JAR) $<

TptpParser.java: ./tptp.g
	java -classpath .:$(ANTLR_JAR) antlr.Tool ./tptp.g

doc: $(SRC)
	mkdir -p $(DOCDIR)
	javadoc -d $(DOCDIR) $(SRC)

clean:
	rm -rf $(TRASH) $(PARSER_SOURCES) $(PARSER_CLS)

distclean: clean
	rm -rf $(PARSER_SRC) TptpParser.jar
######################################################################

